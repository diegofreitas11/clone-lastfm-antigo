{"ast":null,"code":"var _jsxFileName = \"/home/diegofreitas/clone-lastfm-antigo/src/artistChart.js\";\nimport React from 'react';\nimport './index.css';\nimport api from './services/api';\nconst periods = [{\n  value: '7day',\n  name: 'Last 7 Days'\n}, {\n  value: '1month',\n  name: 'Last month'\n}, {\n  value: '3month',\n  name: 'Last 3 months'\n}, {\n  value: '6month',\n  name: 'Last 6 months'\n}, {\n  value: '12month',\n  name: 'Last 12 months'\n}, {\n  value: 'overall',\n  name: 'Overall'\n}];\nconst API_KEY = '87388aa0974f3cc9ddf2e4adac39a39e';\nexport default class ArtistChart extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedPeriod: periods[0],\n      charts: this.props.artists\n      /*{'7day': null, '1month': null, '3month': null,\n         '6month': null, '12month': null, 'overall': this.props.artists}*/\n\n    };\n\n    this.loadData = async () => {\n      let user = window.location.href.split('/')[3] || 'fltngboy';\n      var response = await api.get(`?api_key=${API_KEY}&method=user.gettopartists&username=${user}&limit=8&period=${this.state.selectedPeriod.value}&format=json`);\n      this.setState({\n        charts: response.data.topartists.artist\n      });\n    };\n\n    this.changeTab = async item => {\n      this.setState({\n        selectedPeriod: item\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  render() {\n    const topCount = this.state.charts ? this.state.charts[0].playcount : null;\n    console.log(this.state);\n    console.log(this.props);\n    const chartRows = this.state.charts ? this.state.charts.map((item, index) => /*#__PURE__*/React.createElement(\"tr\", {\n      style: {\n        backgroundColor: index % 2 === 0 ? '#D8D8D8' : '#fff'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      className: \"position\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"subject\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, \" \", item.name), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"chartBarCell\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chartBar\",\n      style: {\n        width: `${item.playcount / topCount * 100}%`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 25\n      }\n    }, item.playcount))))) : null;\n    const tabItens = periods.map(item => {\n      let comp = this.state.selectedPeriod === item ? /*#__PURE__*/React.createElement(\"li\", {\n        id: \"selected\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }\n      }, item.name) : /*#__PURE__*/React.createElement(\"li\", {\n        onClick: () => this.changeTab(item),\n        style: {\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }\n      }, item.name);\n      return comp;\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"artistChart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, \"Top Artists\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tabs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, tabItens)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 25\n      }\n    }, chartRows))));\n  }\n\n}","map":{"version":3,"sources":["/home/diegofreitas/clone-lastfm-antigo/src/artistChart.js"],"names":["React","api","periods","value","name","API_KEY","ArtistChart","Component","state","selectedPeriod","charts","props","artists","loadData","user","window","location","href","split","response","get","setState","data","topartists","artist","changeTab","item","componentDidMount","render","topCount","playcount","console","log","chartRows","map","index","backgroundColor","width","tabItens","comp","cursor"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './index.css';\nimport api from './services/api';\n\n\nconst periods = [\n    {value: '7day', name:'Last 7 Days'}, \n    {value: '1month', name:'Last month'}, \n    {value: '3month', name:'Last 3 months'}, \n    {value: '6month', name:'Last 6 months'}, \n    {value: '12month', name:'Last 12 months'}, \n    {value: 'overall', name: 'Overall'}\n]\n\nconst API_KEY = '87388aa0974f3cc9ddf2e4adac39a39e';\n\nexport default class ArtistChart extends React.Component{\n    state = {\n        selectedPeriod: periods[0],\n        charts: this.props.artists\n     /*{'7day': null, '1month': null, '3month': null,\n        '6month': null, '12month': null, 'overall': this.props.artists}*/\n    }\n\n    componentDidMount(){\n        this.loadData();\n    }\n\n    loadData = async () => {\n        let user = window.location.href.split('/')[3] || 'fltngboy'\n        var response = await api.get(`?api_key=${API_KEY}&method=user.gettopartists&username=${user}&limit=8&period=${this.state.selectedPeriod.value}&format=json`);\n    \n        this.setState({\n            charts: response.data.topartists.artist\n        })    \n    }\n\n    changeTab = async (item) => {\n        this.setState({\n            selectedPeriod: item\n        })\n    }\n\n    render(){\n        const topCount = this.state.charts ? this.state.charts[0].playcount : null;\n        console.log(this.state);\n        console.log(this.props);\n        const chartRows = this.state.charts ? this.state.charts.map((item, index) => (\n            <tr style={{backgroundColor: index%2===0 ? '#D8D8D8' : '#fff'}}>\n                <td className='position'>{index+1}</td>\n                <td className='subject'> {item.name}</td>\n                <td className='chartBarCell'>\n                    <div className='chartBar' style={{width: `${(item.playcount/topCount)*100}%`}}>\n                        <a href='#'>{item.playcount}</a>\n                    </div>\n                </td>\n            </tr>\n        )) : null\n\n\n        const tabItens = periods.map((item) => {\n            let comp = this.state.selectedPeriod === item ?\n            <li id='selected'>{item.name}</li> :\n            <li onClick={() => this.changeTab(item)} style={{cursor: 'pointer'}}>{item.name}</li>\n            return comp;\n        })\n\n        return(\n            <div className='artistChart'>\n                <h2>Top Artists</h2>\n                <div className='tabs'>\n                <ul>\n                    {tabItens}\n                </ul>\n                </div>\n                <div className='chart'>\n                    <table>\n                        <tbody>\n                            {chartRows}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}