{"ast":null,"code":"var LastFmBase = require(\"./lastfm-base\");\n\nvar LastFmInfo = function (lastfm, type, options) {\n  var that = this;\n  options = options || {};\n  LastFmBase.call(this);\n  registerEventHandlers(options);\n  requestInfo(type, options);\n\n  function registerEventHandlers(options) {\n    that.registerHandlers(options.handlers);\n  }\n\n  function requestInfo(type, options) {\n    if (!type) {\n      that.emit(\"error\", new Error(\"Item type not specified\"));\n      return;\n    }\n\n    var params = that.filterParameters(options),\n        method = type + \".getinfo\",\n        request = lastfm.request(method, params);\n    request.on(\"success\", success);\n    request.on(\"error\", error);\n  }\n\n  function success(response) {\n    if (response[type]) {\n      that.emit(\"success\", response[type]);\n      return;\n    }\n\n    that.emit(\"error\", new Error(\"Unexpected error\"));\n  }\n\n  function error(error) {\n    that.emit(\"error\", error);\n  }\n};\n\nLastFmInfo.prototype = Object.create(LastFmBase.prototype);\nmodule.exports = LastFmInfo;","map":{"version":3,"sources":["/home/diegofreitas/clone-lastfm-antigo/node_modules/lastfm/lib/lastfm/lastfm-info.js"],"names":["LastFmBase","require","LastFmInfo","lastfm","type","options","that","call","registerEventHandlers","requestInfo","registerHandlers","handlers","emit","Error","params","filterParameters","method","request","on","success","error","response","prototype","Object","create","module","exports"],"mappings":"AAAA,IAAIA,UAAU,GAAGC,OAAO,CAAC,eAAD,CAAxB;;AAEA,IAAIC,UAAU,GAAG,UAASC,MAAT,EAAiBC,IAAjB,EAAuBC,OAAvB,EAAgC;AAC/C,MAAIC,IAAI,GAAG,IAAX;AACAD,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACAL,EAAAA,UAAU,CAACO,IAAX,CAAgB,IAAhB;AAEAC,EAAAA,qBAAqB,CAACH,OAAD,CAArB;AACAI,EAAAA,WAAW,CAACL,IAAD,EAAOC,OAAP,CAAX;;AAEA,WAASG,qBAAT,CAA+BH,OAA/B,EAAwC;AACtCC,IAAAA,IAAI,CAACI,gBAAL,CAAsBL,OAAO,CAACM,QAA9B;AACD;;AAED,WAASF,WAAT,CAAqBL,IAArB,EAA2BC,OAA3B,EAAoC;AAClC,QAAI,CAACD,IAAL,EAAW;AACTE,MAAAA,IAAI,CAACM,IAAL,CAAU,OAAV,EAAmB,IAAIC,KAAJ,CAAU,yBAAV,CAAnB;AACA;AACD;;AAED,QAAIC,MAAM,GAAGR,IAAI,CAACS,gBAAL,CAAsBV,OAAtB,CAAb;AAAA,QACIW,MAAM,GAAGZ,IAAI,GAAG,UADpB;AAAA,QAEIa,OAAO,GAAGd,MAAM,CAACc,OAAP,CAAeD,MAAf,EAAuBF,MAAvB,CAFd;AAGAG,IAAAA,OAAO,CAACC,EAAR,CAAW,SAAX,EAAsBC,OAAtB;AACAF,IAAAA,OAAO,CAACC,EAAR,CAAW,OAAX,EAAoBE,KAApB;AACD;;AAED,WAASD,OAAT,CAAiBE,QAAjB,EAA2B;AACzB,QAAIA,QAAQ,CAACjB,IAAD,CAAZ,EAAoB;AAClBE,MAAAA,IAAI,CAACM,IAAL,CAAU,SAAV,EAAqBS,QAAQ,CAACjB,IAAD,CAA7B;AACA;AACD;;AACDE,IAAAA,IAAI,CAACM,IAAL,CAAU,OAAV,EAAmB,IAAIC,KAAJ,CAAU,kBAAV,CAAnB;AACD;;AAED,WAASO,KAAT,CAAeA,KAAf,EAAsB;AACpBd,IAAAA,IAAI,CAACM,IAAL,CAAU,OAAV,EAAmBQ,KAAnB;AACD;AACF,CApCD;;AAsCAlB,UAAU,CAACoB,SAAX,GAAuBC,MAAM,CAACC,MAAP,CAAcxB,UAAU,CAACsB,SAAzB,CAAvB;AAEAG,MAAM,CAACC,OAAP,GAAiBxB,UAAjB","sourcesContent":["var LastFmBase = require(\"./lastfm-base\");\n\nvar LastFmInfo = function(lastfm, type, options) {\n  var that = this;\n  options = options || {};\n  LastFmBase.call(this);\n\n  registerEventHandlers(options);\n  requestInfo(type, options);\n\n  function registerEventHandlers(options) {\n    that.registerHandlers(options.handlers);\n  }\n\n  function requestInfo(type, options) {\n    if (!type) {\n      that.emit(\"error\", new Error(\"Item type not specified\"));\n      return;\n    }\n\n    var params = that.filterParameters(options)\n      , method = type + \".getinfo\"\n      , request = lastfm.request(method, params);\n    request.on(\"success\", success);\n    request.on(\"error\", error);\n  }\n\n  function success(response) {\n    if (response[type]) {\n      that.emit(\"success\", response[type]);\n      return;\n    }\n    that.emit(\"error\", new Error(\"Unexpected error\"));\n  }\n  \n  function error(error) {\n    that.emit(\"error\", error);\n  }\n};\n\nLastFmInfo.prototype = Object.create(LastFmBase.prototype);\n\nmodule.exports = LastFmInfo;\n"]},"metadata":{},"sourceType":"script"}