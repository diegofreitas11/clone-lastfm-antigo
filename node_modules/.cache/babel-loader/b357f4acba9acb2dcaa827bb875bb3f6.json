{"ast":null,"code":"var defaults = require('./defaults');\n\nvar Track = module.exports = function (lastfm) {\n  this.lastfm = lastfm;\n};\n\nTrack.prototype.addTags = function (artist, track, tags, callback) {\n  if (!Array.isArray(tags)) {\n    tags = [tags];\n  }\n\n  var options = defaults.defaultOptions({\n    'artist': artist,\n    'track': track,\n    'tags': tags.join(','),\n    'sk': this.lastfm.sessionCredentials.key\n  }, callback);\n  this.lastfm.api.request('track.addTags', options);\n};\n\nTrack.prototype.getCorrection = function (artist, track, callback) {\n  var options = defaults.defaultOptions({\n    'artist': artist,\n    'track': track\n  }, callback, 'corrections');\n  this.lastfm.api.request('track.getCorrection', options);\n};\n\nTrack.prototype.getInfo = function (params, callback) {\n  var options = defaults.defaultOptions(params, callback, 'track');\n  this.lastfm.api.request('track.getInfo', options);\n};\n\nTrack.prototype.getSimilar = function (params, callback) {\n  var options = defaults.defaultOptions(params, callback, 'similartracks');\n  this.lastfm.api.request('track.getSimilar', options);\n};\n\nTrack.prototype.getTags = function (params, callback) {\n  var options = defaults.defaultOptions(params, callback, 'tags');\n  this.lastfm.api.request('track.getTags', options);\n};\n\nTrack.prototype.getTopTags = function (params, callback) {\n  var options = defaults.defaultOptions(params, callback, 'toptags');\n  this.lastfm.api.request('track.getTopTags', options);\n};\n\nTrack.prototype.love = function (params, callback) {\n  var options = defaults.defaultOptions(params, callback);\n  options.sk = this.lastfm.sessionCredentials.key;\n  this.lastfm.api.request('track.love', options);\n};\n\nTrack.prototype.removeTag = function (artist, track, tag, callback) {\n  var options = defaults.defaultOptions({\n    'artist': artist,\n    'track': track,\n    'tag': tag,\n    'sk': this.lastfm.sessionCredentials.key\n  }, callback);\n  this.lastfm.api.request('track.removeTag', options);\n};\n\nTrack.prototype.scrobble = function (params, callback) {\n  var i,\n      len,\n      key,\n      newParams = {};\n\n  if (Array.isArray(params)) {\n    for (i = 0, len = params.length; i < len; i++) {\n      for (key in params[i]) {\n        newParams[key + '[' + i + ']'] = params[i][key];\n      }\n    }\n\n    params = newParams;\n  }\n\n  var options = defaults.defaultOptions(params, callback, 'scrobbles');\n  options.sk = this.lastfm.sessionCredentials.key;\n  this.lastfm.api.request('track.scrobble', options);\n};\n\nTrack.prototype.search = function (params, callback) {\n  var options = defaults.defaultOptions(params, callback, 'results');\n  this.lastfm.api.request('track.search', options);\n};\n\nTrack.prototype.unlove = function (artist, track, callback) {\n  var options = defaults.defaultOptions({\n    'artist': artist,\n    'track': track,\n    'sk': this.lastfm.sessionCredentials.key\n  }, callback);\n  this.lastfm.api.request('track.unlove', options);\n};\n\nTrack.prototype.updateNowPlaying = function (params, callback) {\n  var options = defaults.defaultOptions(params, callback, 'nowplaying');\n  options.sk = this.lastfm.sessionCredentials.key;\n  this.lastfm.api.request('track.updateNowPlaying', options);\n};","map":{"version":3,"sources":["/home/diegofreitas/clone-lastfm-antigo/node_modules/lastfmapi/lib/track.js"],"names":["defaults","require","Track","module","exports","lastfm","prototype","addTags","artist","track","tags","callback","Array","isArray","options","defaultOptions","join","sessionCredentials","key","api","request","getCorrection","getInfo","params","getSimilar","getTags","getTopTags","love","sk","removeTag","tag","scrobble","i","len","newParams","length","search","unlove","updateNowPlaying"],"mappings":"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","sourcesContent":["var defaults = require('./defaults');\n\nvar Track = module.exports = function (lastfm) {\n\tthis.lastfm = lastfm;\n};\n\nTrack.prototype.addTags = function (artist, track, tags, callback) {\n\tif (!Array.isArray(tags)) { tags = [ tags ]; }\n\tvar options = defaults.defaultOptions({\n\t\t'artist' : artist,\n\t\t'track' : track,\n\t\t'tags' : tags.join(','),\n\t\t'sk' : this.lastfm.sessionCredentials.key\n\t}, callback);\n\tthis.lastfm.api.request('track.addTags', options);\n};\n\nTrack.prototype.getCorrection = function (artist, track, callback) {\n\tvar options = defaults.defaultOptions({\n\t\t'artist' : artist,\n\t\t'track' : track\n\t}, callback, 'corrections');\n\tthis.lastfm.api.request('track.getCorrection', options);\n};\n\nTrack.prototype.getInfo = function (params, callback) {\n\tvar options = defaults.defaultOptions(params, callback, 'track');\n\tthis.lastfm.api.request('track.getInfo', options);\n};\n\nTrack.prototype.getSimilar = function (params, callback) {\n\tvar options = defaults.defaultOptions(params, callback, 'similartracks');\n\tthis.lastfm.api.request('track.getSimilar', options);\n};\n\nTrack.prototype.getTags = function (params, callback) {\n\tvar options = defaults.defaultOptions(params, callback, 'tags');\n\tthis.lastfm.api.request('track.getTags', options);\n};\n\nTrack.prototype.getTopTags = function (params, callback) {\n\tvar options = defaults.defaultOptions(params, callback, 'toptags');\n\tthis.lastfm.api.request('track.getTopTags', options);\n};\n\nTrack.prototype.love = function (params, callback) {\n\tvar options = defaults.defaultOptions(params, callback);\n\toptions.sk = this.lastfm.sessionCredentials.key;\n\tthis.lastfm.api.request('track.love', options);\n};\n\nTrack.prototype.removeTag = function (artist, track, tag, callback) {\n\tvar options = defaults.defaultOptions({\n\t\t'artist' : artist,\n\t\t'track' : track,\n\t\t'tag' : tag,\n\t\t'sk' : this.lastfm.sessionCredentials.key\n\t}, callback);\n\tthis.lastfm.api.request('track.removeTag', options);\n};\n\nTrack.prototype.scrobble = function (params, callback) {\n\tvar i, len, key, newParams = {};\n\tif (Array.isArray(params)) {\n\t\tfor (i = 0, len = params.length; i < len; i++) {\n\t\t\tfor (key in params[i]) {\n\t\t\t\tnewParams[key + '[' + i + ']'] = params[i][key];\n\t\t\t}\n\t\t}\n\t\tparams = newParams;\n\t}\n\tvar options = defaults.defaultOptions(params, callback, 'scrobbles');\n\toptions.sk = this.lastfm.sessionCredentials.key;\n\tthis.lastfm.api.request('track.scrobble', options);\n};\n\nTrack.prototype.search = function (params, callback) {\n\tvar options = defaults.defaultOptions(params, callback, 'results');\n\tthis.lastfm.api.request('track.search', options);\n};\n\nTrack.prototype.unlove = function (artist, track, callback) {\n\tvar options = defaults.defaultOptions({\n\t\t'artist' : artist,\n\t\t'track' : track,\n\t\t'sk' : this.lastfm.sessionCredentials.key\n\t}, callback);\n\tthis.lastfm.api.request('track.unlove', options);\n};\n\nTrack.prototype.updateNowPlaying = function (params, callback) {\n\tvar options = defaults.defaultOptions(params, callback, 'nowplaying');\n\toptions.sk = this.lastfm.sessionCredentials.key;\n\tthis.lastfm.api.request('track.updateNowPlaying', options);\n};\n"]},"metadata":{},"sourceType":"script"}